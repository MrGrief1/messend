<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GlassChat — Вход и регистрация</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
</head>
<body class="auth-body" data-theme="dark">
    <div class="auth-aurora" aria-hidden="true">
        <div class="aurora-layer layer-one"></div>
        <div class="aurora-layer layer-two"></div>
        <div class="aurora-layer layer-three"></div>
        <div class="aurora-particles">
            {% for _ in range(12) %}
            <span></span>
            {% endfor %}
        </div>
    </div>

    <div class="auth-shell">
        <aside class="auth-side glass" aria-label="Краткое описание возможностей GlassChat">
            <header class="auth-brand">
                <span class="brand-avatar" aria-hidden="true">M</span>
                <div>
                    <p class="brand-kicker">messend • real-time matrix</p>
                    <h1>GlassChat Matrix Edition</h1>
                    <p class="brand-subtitle">Обновлённый интерфейс, вдохновлённый Element, но с фирменным стеклянным стилем.</p>
                </div>
            </header>

            <ul class="auth-feature-grid" role="list">
                <li class="feature-card">
                    <span class="material-icons-round" aria-hidden="true">videocam</span>
                    <div>
                        <h3>HD звонки и группы</h3>
                        <p>Организовывайте защищённые встречи и групповые разговоры в пару кликов.</p>
                    </div>
                </li>
                <li class="feature-card">
                    <span class="material-icons-round" aria-hidden="true">forum</span>
                    <div>
                        <h3>Темные и амолед темы</h3>
                        <p>Выберите настроение — от элементарной лаконичности до глубокого AMOLED.</p>
                    </div>
                </li>
                <li class="feature-card">
                    <span class="material-icons-round" aria-hidden="true">shield</span>
                    <div>
                        <h3>Шифрование и приватность</h3>
                        <p>Никаких компромиссов: двухфакторная авторизация и контроль активных сессий.</p>
                    </div>
                </li>
                <li class="feature-card">
                    <span class="material-icons-round" aria-hidden="true">palette</span>
                    <div>
                        <h3>Фирменный стеклянный стиль</h3>
                        <p>Градиенты, мягкие блики и чистая типографика для комфортных долгих сессий.</p>
                    </div>
                </li>
            </ul>

            <footer class="auth-side-footer">
                <div class="status-pill">
                    <span class="material-icons-round" aria-hidden="true">lock</span>
                    Сквозное шифрование по умолчанию
                </div>
                <div class="status-pill">
                    <span class="material-icons-round" aria-hidden="true">speed</span>
                    Встроенная SFU для конференций
                </div>
            </footer>
        </aside>

        <main class="auth-main" aria-live="polite">
            <section class="auth-main-card glass">
                <div class="auth-topbar">
                    <div>
                        <p class="topbar-kicker">Добро пожаловать в новую эру общения</p>
                        <h2>Войдите или создайте аккаунт</h2>
                    </div>
                    <div class="auth-theme-switch" role="group" aria-label="Переключение темы">
                        <button type="button" class="theme-chip is-active" data-theme-option="dark">Темно</button>
                        <button type="button" class="theme-chip" data-theme-option="amoled">AMOLED</button>
                        <button type="button" class="theme-chip" data-theme-option="light">Светло</button>
                        <button type="button" class="theme-chip" data-theme-option="ocean">Ocean</button>
                    </div>
                </div>

                <nav class="auth-toggle" role="tablist">
                    <button type="button" class="toggle-btn is-active" data-auth-view="login" aria-controls="login-form" aria-selected="true">Вход</button>
                    <button type="button" class="toggle-btn" data-auth-view="register" aria-controls="register-form" aria-selected="false">Регистрация</button>
                </nav>

                <form id="login-form" class="auth-form is-active" data-auth-form="login" novalidate>
                    <div class="form-field">
                        <label for="login-identifier">Имя пользователя или email</label>
                        <div class="input-shell">
                            <span class="material-icons-round" aria-hidden="true">alternate_email</span>
                            <input type="text" id="login-identifier" autocomplete="username" placeholder="@nickname или email" required>
                        </div>
                    </div>
                    <div class="form-field">
                        <label for="login-password">Пароль</label>
                        <div class="input-shell">
                            <span class="material-icons-round" aria-hidden="true">lock</span>
                            <input type="password" id="login-password" autocomplete="current-password" placeholder="••••••••" required>
                            <button type="button" class="input-addon" data-password-toggle="login-password" aria-label="Показать пароль">
                                <span class="material-icons-round" aria-hidden="true">visibility</span>
                            </button>
                        </div>
                    </div>
                    <div class="auth-action-row">
                        <button type="submit" class="btn-primary">Войти</button>
                        <button type="button" class="btn-ghost" data-forgot-trigger>Забыли пароль?</button>
                    </div>
                </form>

                <form id="register-form" class="auth-form" data-auth-form="register" novalidate>
                    <div class="form-field">
                        <label for="register-username">Придумайте @тег</label>
                        <div class="input-shell">
                            <span class="material-icons-round" aria-hidden="true">person</span>
                            <input type="text" id="register-username" autocomplete="nickname" inputmode="latin" pattern="[A-Za-z0-9_.-]{3,32}" placeholder="например, glass.master" required>
                        </div>
                        <p class="form-hint" id="username-hint">Допускаются латиница, цифры, точки и подчёркивания.</p>
                    </div>
                    <div class="form-field">
                        <label for="register-email">Email для подтверждения</label>
                        <div class="input-shell">
                            <span class="material-icons-round" aria-hidden="true">mail</span>
                            <input type="email" id="register-email" autocomplete="email" placeholder="name@example.com" required>
                        </div>
                    </div>
                    <div class="form-field">
                        <label for="register-password">Придумайте пароль</label>
                        <div class="input-shell">
                            <span class="material-icons-round" aria-hidden="true">key</span>
                            <input type="password" id="register-password" autocomplete="new-password" placeholder="Минимум 8 символов" required>
                            <button type="button" class="input-addon" data-password-toggle="register-password" aria-label="Показать пароль">
                                <span class="material-icons-round" aria-hidden="true">visibility</span>
                            </button>
                        </div>
                        <div class="password-meter" data-strength-indicator>
                            <div class="password-meter-bar" aria-hidden="true"></div>
                            <p class="password-meter-label" data-strength-label>Надёжность: —</p>
                        </div>
                    </div>
                    <div class="form-field">
                        <label for="register-password-confirm">Повторите пароль</label>
                        <div class="input-shell">
                            <span class="material-icons-round" aria-hidden="true">verified_user</span>
                            <input type="password" id="register-password-confirm" autocomplete="new-password" placeholder="Повторите пароль" required>
                            <button type="button" class="input-addon" data-password-toggle="register-password-confirm" aria-label="Показать пароль">
                                <span class="material-icons-round" aria-hidden="true">visibility</span>
                            </button>
                        </div>
                        <p class="form-hint" id="password-match-hint"></p>
                    </div>
                    <div class="auth-action-row">
                        <button type="submit" class="btn-primary">Создать аккаунт</button>
                        <button type="button" class="btn-ghost" data-auth-view="login">Уже есть аккаунт?</button>
                    </div>
                    <p class="form-terms">Регистрируясь, вы принимаете условия сервиса, а также соглашаетесь с политикой конфиденциальности GlassChat.</p>
                </form>

                <div id="message-box" class="auth-message" role="alert" hidden></div>
            </section>

            <section class="auth-meta">
                <article class="meta-card glass">
                    <header>
                        <h3>Что нового?</h3>
                        <p>Глубоко переработанный дизайн, улучшенные звонки и быстрые приглашения в группы.</p>
                    </header>
                    <ul role="list">
                        <li>
                            <span class="material-icons-round" aria-hidden="true">auto_awesome</span>
                            Обновлённая анимация и стеклянные панели
                        </li>
                        <li>
                            <span class="material-icons-round" aria-hidden="true">group</span>
                            Быстрый старт групповых комнат и каналов
                        </li>
                        <li>
                            <span class="material-icons-round" aria-hidden="true">security</span>
                            Усиленный контроль входа с подсказками надёжности
                        </li>
                    </ul>
                </article>
                <article class="meta-card glass highlight">
                    <h3>Совет дня</h3>
                    <p>Переключайтесь между темами прямо здесь — выбранная тема сохранится и для основного интерфейса.</p>
                    <button type="button" class="btn-pill" data-theme-option="ocean">
                        <span class="material-icons-round" aria-hidden="true">water</span>
                        Попробовать Ocean
                    </button>
                </article>
            </section>
        </main>
    </div>

    <div id="forgot-password-modal" class="auth-modal" role="dialog" aria-modal="true" aria-labelledby="forgot-title" hidden>
        <div class="auth-modal__dialog glass">
            <button type="button" class="modal-close" data-modal-close aria-label="Закрыть окно">
                <span class="material-icons-round" aria-hidden="true">close</span>
            </button>
            <h2 id="forgot-title">Восстановление пароля</h2>
            <p>Введите email, указанный при регистрации. Мы отправим ссылку для восстановления.</p>
            <form id="forgot-password-form" novalidate>
                <div class="form-field">
                    <label for="forgot-email">Email</label>
                    <div class="input-shell">
                        <span class="material-icons-round" aria-hidden="true">outgoing_mail</span>
                        <input type="email" id="forgot-email" autocomplete="email" placeholder="name@example.com" required>
                    </div>
                </div>
                <button type="submit" class="btn-primary" data-modal-submit>Отправить ссылку</button>
            </form>
            <div id="forgot-message" class="auth-message" role="status" hidden></div>
            <p class="modal-footnote">Письмо может прийти в течение 3–5 минут. Не забудьте проверить папку «Спам».</p>
        </div>
    </div>

    <script>
        try {
            const storedTheme = localStorage.getItem('appTheme');
            if (storedTheme) {
                document.body.setAttribute('data-theme', storedTheme);
            }
        } catch (error) {
            console.warn('Не удалось получить тему из localStorage', error);
        }
    </script>
    <script src="{{ url_for('static', filename='js/auth.js') }}" defer></script>
</body>
</html>
