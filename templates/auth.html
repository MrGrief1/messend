<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—Ö–æ–¥ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è - GlassChat</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body data-theme="matrix">
    <div class="auth-container">
        <div class="bg-shape shape1"></div>
        <div class="bg-shape shape2"></div>
        <div class="bg-shape" style="width: 350px; height: 350px; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); top: 50%; left: 50%; transform: translate(-50%, -50%); filter: blur(90px); opacity: 0.4;"></div>

        <div class="auth-card glass">
            <div class="auth-intro">
                <div class="auth-logo">M</div>
                <div class="auth-intro-text">
                    <h1>Messend</h1>
                    <p>–ù–æ–≤–∞—è —Å–¥–µ—Ä–∂–∞–Ω–Ω–∞—è –æ–±–æ–ª–æ—á–∫–∞ —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º —Å—Ç–µ–∫–ª–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∑–≤–æ–Ω–∫–æ–≤, –≥—Ä—É–ø–ø –∏ –∫–∞–Ω–∞–ª–æ–≤.</p>
                </div>
            </div>

            <div class="auth-switcher" role="tablist" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ñ–æ—Ä–º –≤—Ö–æ–¥–∞ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏">
                <button type="button" class="active" data-mode="login" onclick="toggleForms('login')">–í—Ö–æ–¥</button>
                <button type="button" data-mode="register" onclick="toggleForms('register')">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
            </div>

            <div id="login-form">
                <div class="auth-form-header">
                    <h2>–í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç</h2>
                    <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ @—Ç–µ–≥ –∏–ª–∏ Email –∏ –ø–∞—Ä–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–µ—Ä–µ–ø–∏—Å–∫–µ.</p>
                </div>
                <div class="input-group">
                    <input type="text" id="login-identifier" placeholder="@–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ Email" required>
                </div>
                <div class="input-group">
                    <input type="password" id="login-password" placeholder="–ü–∞—Ä–æ–ª—å" required>
                </div>
                <button onclick="handleLogin()">–í–æ–π—Ç–∏</button>
                <p class="toggle-link">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a onclick="toggleForms('register')">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a></p>
                <p class="toggle-link"><a onclick="showForgotPassword()" style="font-size: 14px; color: var(--color-primary);">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</a></p>
            </div>

            <div id="register-form" style="display: none;">
                <div class="auth-form-header">
                    <h2>–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å</h2>
                    <p>–ü—Ä–∏–¥—É–º–∞–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π @—Ç–µ–≥ –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ Email –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞.</p>
                </div>
                <div class="input-group">
                    <input type="text" id="register-username" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–±–µ–∑ @)" required>
                </div>
                <div class="input-group">
                    <input type="email" id="register-email" placeholder="Email (–¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è)" required>
                </div>
                <div class="input-group">
                    <input type="password" id="register-password" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å" required>
                </div>
                <button onclick="handleRegister()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                <p class="toggle-link">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a onclick="toggleForms('login')">–í–æ–π—Ç–∏</a></p>
            </div>

            <div id="message-box"></div>
            
            <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è -->
            <div id="forgot-password-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; align-items: center; justify-content: center;">
                <div class="glass" style="max-width: 400px; width: 90%; padding: 30px; border-radius: var(--radius-xl);">
                    <h2 style="margin-bottom: 20px;">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</h2>
                    <p style="margin-bottom: 20px; opacity: 0.8;">–í–≤–µ–¥–∏—Ç–µ email, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</p>
                    <div class="input-group">
                        <input type="email" id="forgot-email" placeholder="–í–∞—à Email" required>
                    </div>
                    <button onclick="handleForgotPassword()" style="width: 100%; margin-bottom: 10px;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É</button>
                    <button onclick="closeForgotPassword()" style="width: 100%; background: var(--glass-bg);">–û—Ç–º–µ–Ω–∞</button>
                    <div id="forgot-message" style="margin-top: 15px; text-align: center;"></div>
                    <p style="margin-top: 15px; font-size: 12px; opacity: 0.6; text-align: center;">üí° –ü–∏—Å—å–º–æ –º–æ–∂–µ—Ç –ø—Ä–∏–π—Ç–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 3-5 –º–∏–Ω—É—Ç. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–ø–∫—É "–°–ø–∞–º"</p>
                </div>
            </div>
        </div>
    </div>
    <script>
        // –ê–≤—Ç–æ–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–º—ã –∏–∑ localStorage –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—Ö–æ–¥–∞
        try {
            const t = localStorage.getItem('appTheme');
            if (t) document.body.setAttribute('data-theme', t);
        } catch {}
    </script>
    <script src="{{ url_for('static', filename='js/auth.js') }}"></script>
</body>
</html>
